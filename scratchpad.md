# input

```js
import { EmbeddingIndex, getEmbedding } from "client-vector-search";

// Test with more fruits
async function main() {
  const fruitNames = [
    "Apple",
    "Banana",
    "Orange",
    "Grape",
    "Pineapple",
    "Strawberry",
    "Blueberry",
    "Mango",
    "Watermelon",
    "Lemon",
  ];

  // Build objects with id, name, and embedding
  const initialObjects = await Promise.all(
    fruitNames.map(async (name, idx) => ({
      id: idx + 1,
      name,
      embedding: await getEmbedding(name),
    })),
  );

  // Build the index
  const index = new EmbeddingIndex(initialObjects);

  // Query for "Fruit"
  const queryEmbedding = await getEmbedding("Fruit");
  const results = await index.search(queryEmbedding, { topK: 5 });

  // Defensive: print the actual result objects for debugging
  // (to help diagnose if the result objects are not as expected)
  // console.log("DEBUG: Raw results:", results);

  console.log("Top 5 fruits most similar to 'Fruit':");
  results.forEach((result, i) => {
    // If result is a reference to the original object, print its fields
    // If result is a wrapper (e.g. { item, score }), try to extract the item
    let item = result;
    if (result && typeof result === "object") {
      if ("item" in result && result.item) {
        item = result.item;
      }
    }
    // Fallback: print JSON if still not as expected
    if (item && typeof item === "object" && "name" in item && "id" in item) {
      console.log(`${i + 1}. ${item.name} (id: ${item.id})`);
    } else {
      console.log(`${i + 1}.`, JSON.stringify(result));
    }
  });
}

main();
```

# output

```
-0.1187997,-0.5252956,0.3555578,-0.4075424,0.5819833,0.1329514,-0.5694044,0.3830992,0.236038,0.389096,-0.1776793,0.0132392,0.2129589,0.214915,-0.1772045,-0.0672194,0.6051157,0.0463791,-0.7551863,0.0771479,0.7066508,0.32578,0.5312043,0.3040395,0.1350823,-1.1952467,-0.2338599,-1.9263545,0.2076042,-0.0554478,-0.4101113,0.5463989,-0.0737186,-0.0920131,-0.3227937,0.2532843,0.3790963,0.3681062,0.0581453,0.1224323,0.6092857,-0.4061134,0.4540708,-0.0146864,0.2683508,0.3854142,0.2028317,0.1650868,0.2464451,-0.3140201,-0.2408533,0.3746608,-0.0925325,2.1520629,0.8819394,-0.2173364,-0.7219089,0.2206918,0.3544663,-0.4161521,-1.008293,0.1140694,-0.0347974,0.2867224,-0.3768824,-0.5306844,-0.0523927,0.011342,0.0920707,-0.141894,-0.7489613,0.1340606,-0.7099031,-0.2702441,-0.0472786,-0.4166061,0.08957,0.288751,0.0740811,0.3702537,0.0725931,0.0054319,-0.1416779,-0.7688724,0.2530693,-0.4641682,-0.147012,-0.4290988,-0.3677262,0.3305623,-0.0223606,0.1662337,0.0733208,0.0731464,-0.5530198,0.069859,-0.4923654,-0.1044379,0.8355345,0.0021678,-0.3305717,0.7037076,0.3567555,0.2292494,-0.5974073,-0.4149271,-0.434249,0.3685043,0.3403257,0.441671,0.6018845,0.0319321,0.2089218,0.7441214,-0.2932845,0.0338342,-0.5349428,0.2544446,-0.172805,-0.5687802,-0.4891725,-0.1892443,-0.0869412,-2.5520792,0.6456468,-0.23456,0.2376228,-0.3421417,0.3559806,0.27063,-0.3869301,-0.5155539,0.6036078,-0.1262616,-0.0084749,0.5980344,-0.2655925,0.1327703,0.124834,0.2304256,-0.2202712,0.7302393,-0.5233086,0.1139057,0.0059541,1.8319107,-0.3919773,-0.1502817,0.3405573,0.2218013,0.2018536,0.1247804,-0.1334302,0.2719024,0.0792217,1.3203716,-0.2406158,-0.0794669,0.2836655,-0.3429569,0.3980494,0.0937065,0.0273079,-0.0655888,-0.1790367,-0.6152579,-0.4116436,0.8614001,-0.1882823,-0.1209628,-0.5681959,-0.296797,0.1756823,-0.6181005,-0.2899841,0.0535706,0.3418952,0.0653739,-0.0946442,-0.6447044,-0.2047258,-0.6093817,-0.4741858,0.633,0.0496022,-0.1335912,0.2567396,0.539439]}}
4. {"similarity":0.896849,"object":{"id":5,"name":"Pineapple","embedding":[-0.1186499,0.0108607,0.2324653,-0.7643104,0.6583386,0.3117329,0.6570521,0.0310391,0.2872981,0.1296825,-0.1619714,-0.7788576,0.1167623,0.7683084,0.2229131,-0.0475893,-0.0111994,0.1618783,-0.5316173,-0.00031,0.3680658,-0.0695943,-0.3160237,-0.6334586,0.4636325,0.3325432,-0.8040833,-0.414757,-0.5556507,-1.7665423,-0.3881201,-0.0230934,0.1528526,-0.2802127,0.0624073,-0.0164392,-0.1953624,0.3792969,0.0420825,0.3854828,0.8122936,0.1248789,0.0502275,-0.4801116,-0.534964,-0.2919526,-0.2893877,0.1085688,0.5669522,-0.2084719,0.245082,-0.6490908,-0.2387342,-0.0615302,0.0965035,0.5576868,0.5022,-0.1671594,-0.1446616,0.1577256,0.510006,0.1542646,-1.5618269,1.066785,0.3980266,-0.2025639,-0.3071701,-0.0090161,0.2597163,0.2997964,-0.2311247,0.3819795,0.4882687,0.3317604,0.5076194,-0.4596519,0.3006146,-0.6442962,-0.0042979,0.2513193,-0.1557466,-0.0021787,-0.3066043,-0.1297169,-0.0456994,-0.6859378,-0.2726308,-0.4564796,0.3370641,-0.1214813,-0.5212841,0.1070799,0.0288932,-0.0335812,-1.1127168,-0.0834233,0.1809735,-0.1090317,-0.340888,2.0274916,-0.1456051,0.4311221,0.5698303,-0.5770164,-0.0530526,-0.2905107,-0.4644781,-0.338666,0.2759211,0.4948504,0.2364167,0.1965613,0.6327456,-0.1654748,0.307099,0.0416399,0.8667905,0.4828872,-0.5724741,-0.0817152,-0.2121706,0.3082958,0.2491128,-0.4831343,-0.0003055,-0.7219315,0.1245121,0.7450063,0.4775885,-0.0105981,0.8992556,-0.2200724,-0.2888013,0.0787842,0.2653729,0.356657,0.0337552,-0.229344,-0.1198836,-0.2930218,-0.6374488,-0.8834535,-0.066715,-0.8483343,-0.0578502,0.3482837,-0.1808102,0.6427839,-0.5178083,0.576634,-0.5988708,0.2636095,-0.2161803,-0.210839,0.3454424,0.1265422,0.5289717,0.493838,0.23474,0.3508528,-0.1644046,-0.2551411,-0.459843,0.6069815,-0.210422,-0.7055767,-0.1922035,0.3365524,-0.170687,-0.3172593,0.4270483,0.4903975,-0.3112017,-0.0975133,0.5415384,0.2915511,-0.0521202,0.2962,0.1627223,-0.0261885,0.3310713,-0.8461301,-0.6787587,0.251685,0.4686397,-0.3593661,0.1045634,-0.1131573,0.4123856,0.1799139,0.0786518,0.0404289,-0.8088577,0.0525364,-0.5040873,-0.4171293,-0.184272,-0.1008172,0.5372702,-0.3191811,0.1950764,-0.2020787,-0.2949072,0.0402999,0.8212891,0.1425521,-0.2311405,0.1366881,0.1820234,0.3295543,-0.6734958,0.2562645,0.547193,-0.1006237,-0.3969066,0.2115703,0.3627914,0.6366175,0.3908663,0.2497568,0.447423,-1.1816745,-0.5461724,-1.9898145,0.1594709,0.0340868,-0.5527704,0.5034919,-0.1842925,-0.1036922,-0.5326814,0.3146032,0.2736147,0.2966248,-0.1095924,-0.004325,0.3521332,-0.1340049,0.4608364,0.4952061,0.0562296,0.3066465,0.0685007,-0.2240278,0.0131223,-0.1426795,-0.1288419,0.2880137,-0.1864698,2.1775074,0.8180124,0.1503383,-0.19044,-0.0826313,0.1361956,-0.2694442,-1.1385772,0.5318434,0.0909063,0.2708902,-0.3447892,-0.469505,-0.3500176,-0.1652236,0.3754622,-0.4237825,-0.6427085,0.0611004,-1.0211411,-0.062049,0.3270185,-0.2074828,0.0834025,0.688215,-0.0586162,0.3038099,0.1130492,0.0769324,-0.3195465,-0.8827249,0.1565375,-0.4981591,0.0952514,-0.6014174,-0.2874547,0.2982188,-0.5976893,0.5238515,0.3763534,0.0597787,-0.3825598,0.4077165,-0.4241241,0.3558813,0.5041403,-0.1707512,0.0035451,0.6250341,0.6784856,0.3423315,-0.4637854,-0.3328563,-0.2867639,-0.0987099,-0.1766717,0.4274994,0.4094152,0.2995838,0.076091,0.6193534,-0.3111883,0.4002652,-0.4799546,0.4964278,-0.0362738,0.0077632,-0.5297983,0.3865804,0.0512246,-2.3744154,0.4118764,0.1382082,0.4261828,-0.0653309,0.117102,0.4528523,0.07088,-0.5975187,0.3249616,-0.1647742,0.2316931,0.7721416,-0.0627777,-0.3363417,0.2241701,0.1815013,-0.4836367,0.3576776,-0.3288199,0.1746171,0.3892148,2.1471946,-0.1616631,-0.0890238,0.1207688,-0.2565194,-0.1022175,0.0981187,0.1343561,0.2216653,0.3617488,1.1319344,-0.2362077,0.5861648,0.4279647,-0.0882338,0.1143881,0.0484279,-0.037313,-0.4649579,0.1663246,-0.611976,-0.1811292,0.6363046,-0.2509478,-0.4017656,-0.7726729,-0.0108376,-0.0834891,-0.3164895,-0.7204687,0.0428929,0.2175739,0.2119939,-0.2148184,-0.8077179,-0.1988868,-0.7403636,-0.3973018,0.3170509,-0.2732983,-0.2811293,0.3971062,0.4714112]}}
5. {"similarity":0.892068,"object":{"id":4,"name":"Grape","embedding":[-0.1968181,-0.173211,0.2373213,-0.4599339,0.2322604,0.0717385,0.5033352,0.863196,-0.0937122,0.0547814,0.1744421,-1.2144629,-0.0449304,0.1067598,-0.1641803,-0.0886456,0.2590801,0.4638804,-0.43065,0.2380113,-0.0025641,-0.0935549,-0.0631317,-0.6477457,0.5571726,0.4340725,-0.4944092,-0.2258548,-0.4810287,-1.1847655,-0.1004008,0.1066184,0.2564792,-0.2888344,-0.3349699,-0.0863034,-0.3771949,0.1880804,-0.6023697,0.0007282,0.6636761,-0.0543919,-0.4343596,-0.8197911,-0.8791063,0.1148323,-0.5216516,0.1757648,0.9002659,-0.1468772,0.2210383,-0.112962,0.3142145,0.4463134,0.1184236,0.3569226,0.7355509,0.0494231,-0.1351702,0.4335405,0.5192081,-0.317324,-1.7195612,0.9088121,0.2795101,0.1723097,-0.8172825,0.1579108,0.330988,0.4529638,-0.3120154,0.3533612,-0.1392972,0.8658741,0.4228874,-0.091495,0.0752321,-0.825755,0.0876086,0.2426573,-0.1099617,-0.3229702,-0.351264,0.05857,-0.2306769,-0.3745117,0.188554,-0.4426913,0.5854931,0.2338733,-0.4762718,-0.1912041,-0.0944305,0.1547729,-0.4770095,-0.0511434,0.5065638,-0.1749583,-0.2449888,2.3934207,-0.287303,0.3764504,0.4672895,-0.6471518,0.1918175,0.2855323,-0.4730337,-0.3717087,-0.0620678,0.4125702,0.2803925,-0.6872212,0.2597686,-0.7745858,0.4258741,-0.2273097,0.7789323,0.0204148,-0.1844581,-0.197506,-0.1413366,0.2583767,0.2097823,-0.1977025,0.2459815,-0.6919895,0.086227,1.0033411,0.3418338,0.2634587,0.8012076,-0.406395,-0.4183326,-0.233422,-0.2458905,0.2291836,0.0902212,0.0590007,-0.2949988,-0.2416269,-0.6413308,-0.811599,-0.0775054,-1.0493914,0.0901422,0.7826477,-0.3842895,0.1382655,-0.3831558,0.4005013,-0.4153633,0.3739347,-0.2445309,-0.1187935,0.2196395,-0.0328,-0.119171,0.5619557,-0.5104578,0.4639688,0.0481807,-0.112998,-0.0066157,0.9400035,0.0440769,-0.687622,-0.3525695,0.1245194,0.0730851,-0.1902296,0.5744884,0.3877153,-0.5863791,0.2138136,0.6492182,0.3199147,-0.2546858,0.2359282,0.1764598,-0.0108416,0.5646634,-0.1287274,-0.4565086,0.5993367,0.3436244,-0.1482751,-0.1621679,-0.1578463,0.174507,0.1422946,-0.063117,0.1701121,-0.6330379,-0.2840229,-0.5995592,0.1318422,-0.2663838,-0.280019,0.1724191,-0.3863367,0.4886033,-0.1547732,-0.1949573,0.4362066,0.3313707,0.4548165,-0.2885006,-0.0602552,0.0085607,-0.0654567,-0.0820055,-0.3429679,0.5954888,-0.1048809,-0.6527218,0.1336638,-0.1822506,0.2023512,0.419852,0.1028383,0.0641563,-1.1493714,-0.4817388,-2.0886798,-0.0143819,-0.3665523,-0.0256653,0.6450799,0.3716189,0.3048243,-0.0952161,0.131496,0.2925289,0.2882273,0.2088166,0.1447263,0.3067248,-0.30765,0.5716425,0.5694796,0.4025934,0.0810558,-0.073299,-0.1857309,0.1896254,0.1789115,-0.3170217,0.2076511,-0.3680855,2.1218278,0.8884201,-0.0032962,-0.4174929,0.0302674,0.5000951,-0.1303443,-0.972117,0.0411862,0.1778272,0.5396141,0.2436223,-0.8016397,0.0469434,-0.0176606,0.1779234,-0.2657472,-0.9671171,-0.0472298,-0.3634487,0.2359214,0.3111935,-0.2141716,0.0117872,0.4904603,0.1307488,0.3781334,0.4036267,0.1723554,-0.170604,-0.721625,0.1765933,-0.2054801,0.0816418,-0.5582931,-0.5885831,0.3522375,-0.2188895,0.4747175,0.1158416,0.2024078,-0.4487232,0.4965042,-0.5173666,-0.4714923,0.8053891,-0.2055601,-0.6733412,0.6079454,0.3022127,0.1233951,-0.249902,-0.0920587,-0.4073298,0.2991648,-0.2017328,0.3438396,0.2504374,0.1354158,-0.0388905,0.5114848,0.0537742,0.1778959,-0.4093781,0.4187958,0.1763449,-0.4094582,-0.4001992,0.2937331,0.0622613,-2.7961333,0.7112367,0.1811849,0.2488382,-0.3535806,0.3996644,0.0336775,0.0176791,-0.7465883,0.0245669,0.3338085,-0.1160574,0.748744,-0.1149159,-0.1284748,0.2005927,0.4319129,-0.5454845,0.2211916,-0.225863,-0.0639932,0.3293291,1.8127913,-0.7382156,0.0648453,-0.0802214,-0.4715538,0.3128995,0.0171896,0.3606517,0.3428885,0.2112317,1.1517341,-0.0702011,-0.0728996,0.4810357,-0.0176401,0.4038237,0.136362,0.19474,0.1318163,-0.1744404,-0.6895421,-0.4108723,0.7139732,-0.1966485,-0.2175639,-0.4744084,-0.1165708,0.3939413,-0.2504208,-0.1405839,-0.1956305,0.5054852,-0.042496,-0.128213,-0.7886592,-0.7613486,-0.5800123,-0.2238233,0.2894292,-0.5303989,-0.0021624,0.5291238,0.4187688]}}
```
